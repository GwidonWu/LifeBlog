var handleHomeContentHeight = function () { $("#home").height($(window).height()) }; var handleHeaderNavigationState = function () { $(window).on("scroll", function () { var totalScrollTop = $(window).scrollTop(); if (totalScrollTop >= 50) { $("#header").addClass("navbar-sm") } else { $("#header").removeClass("navbar-sm") } }) }; var handleAddCommasToNumber = function (value) { return value.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") }; var handlePageContainerShow = function () { $("#page-container").addClass("in") }; var handlePaceLoadingPlugins = function () { Pace.on("hide", function () { setTimeout(function () { $(".pace").addClass("hide") }, 1000) }) }; var handlePageScrollContentAnimation = function () { $('[data-scrollview="true"]').each(function () { var myElement = $(this); var elementWatcher = scrollMonitor.create(myElement, 60); elementWatcher.enterViewport(function () { $(myElement).find("[data-animation=true]").each(function () { var targetAnimation = $(this).attr("data-animation-type"); var targetElement = $(this); if (!$(targetElement).hasClass("contentAnimated")) { if (targetAnimation == "number") { var finalNumber = parseInt($(targetElement).attr("data-final-number")); $({ animateNumber: 0 }).animate({ animateNumber: finalNumber }, { duration: 1000, easing: "swing", step: function () { var displayNumber = handleAddCommasToNumber(Math.ceil(this.animateNumber)); $(targetElement).text(displayNumber).addClass("contentAnimated") } }) } else { $(this).addClass(targetAnimation + " contentAnimated") } } }) }) }) }; var handleHeaderScrollToAction = function () { $("[data-click=scroll-to-target]").on("click", function (e) { e.preventDefault(); e.stopPropagation(); var target = $(this).attr("href"); var headerHeight = 50; $("html, body").animate({ scrollTop: $(target).offset().top - headerHeight }, 500); if ($(this).attr("data-toggle") == "dropdown") { var targetLi = $(this).closest("li.dropdown"); if ($(targetLi).hasClass("open")) { $(targetLi).removeClass("open") } else { $(targetLi).addClass("open") } } }); $(document).click(function (e) { if (!e.isPropagationStopped()) { $(".dropdown.open").removeClass("open") } }) }; var handleTooltipActivation = function () { if ($("[data-toggle=tooltip]").length !== 0) { $("[data-toggle=tooltip]").tooltip("hide") } }; var handleThemePanelExpand = function () { $('[data-click="theme-panel-expand"]').live("click", function () { var targetContainer = ".theme-panel"; var targetClass = "active"; if ($(targetContainer).hasClass(targetClass)) { $(targetContainer).removeClass(targetClass) } else { $(targetContainer).addClass(targetClass) } }) }; var handleThemePageControl = function () { if ($.cookie && $.cookie("theme")) { if ($(".theme-list").length !== 0) { $(".theme-list [data-theme]").closest("li").removeClass("active"); $('.theme-list [data-theme="' + $.cookie("theme") + '"]').closest("li").addClass("active") } var cssFileSrc = "../../../src/Web/assets/css/theme/" + $.cookie("theme") + ".css"; $("#theme").attr("href", cssFileSrc) } $(".theme-list [data-theme]").live("click", function () { var cssFileSrc = "../../../src/Web/assets/css/theme/" + $(this).attr("data-theme") + ".css"; $("#theme").attr("href", cssFileSrc); $(".theme-list [data-theme]").not(this).closest("li").removeClass("active"); $(this).closest("li").addClass("active"); $.cookie("theme", $(this).attr("data-theme")) }) }; var handlePostGrid = function () { if ($(".post-grid").length !== 0) { $(".post-grid").masonry({ itemSelector: ".post-li", columnWidth: ".post-li", percentPosition: true }) } }; var App = function () { return { init: function () { handleHomeContentHeight(); handleHeaderNavigationState(); handlePageContainerShow(); handlePaceLoadingPlugins(); handlePageScrollContentAnimation(); handleHeaderScrollToAction(); handleTooltipActivation(); handleThemePanelExpand(); handleThemePageControl(); handlePostGrid() } } }();